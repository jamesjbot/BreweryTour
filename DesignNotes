Persistent Context Observers

Persitent Context Fetchers
BeerDetailViewController gets style name from Persistent Context
BreweryDBClient Checks Styles in the Persistent Context prior to adding new style in the MainContext
BreweryDBClient gets style names from Persistent context in getStyleName(byID)

Main Context Observers
StylesTableList
SelectedBeersTableList frc observer the mainContext
BreweryTableList frc observes the mainContext
AllBreweriesTableList frc observes the mainContext
MapViewController initial frc for styles is in mainContext
MapViewController find brewery is in mainContext
MapViewController find favoritebrewery in mainContext
FavoriteBeersViewcontroller reads mainContext

Background Context Observers
There should be none as this is used for scratch updating
BeerDetailViewController searchForBeerInCoreData uses background context.
BreweryDBClient getBeerByID use supplied context looks like background only
BreweryDBClient getBreweryByID use supplied context looks like background only
____________________________
Looking for brewery Optional("xe0M8s")
Looking for brewery Optional("5zetyE")
Looking for brewery Optional("djUw9d")
Looking for brewery Optional("t6klTR")
Looking for brewery Optional("tOsvyj")
Looking for brewery Optional("1VymQC")
Looking for brewery Optional("DPLTAJ")
Looking for brewery Optional("tOsvyj")
Looking for brewery Optional("ZePAkY")
Looking for brewery Optional("5zetyE")
Looking for brewery Optional("EA5y03")
Looking for brewery Optional("2EpPvi")
Looking for brewery Optional("VipzfD")
Looking for brewery Optional("k5p3Fy")
Looking for brewery Optional("ncLN8G")
Looking for brewery Optional("2EpPvi")
Looking for brewery Optional("kWJGj9")
Looking for brewery Optional("DPLTAJ")
Looking for brewery Optional("qjZIZq")
Looking for brewery Optional("74vDOC")
Looking for brewery Optional("2EpPvi")
Looking for brewery Optional("fpVo3M")
Looking for brewery Optional("ObHayQ")
Looking for brewery Optional("hP5LHZ")
Looking for brewery Optional("aAMifM")
Looking for brewery Optional("EA5y03")
----------------------------
Persitent Context Updaters

Main Context Updaters
BrewryDBClient Styles creation
MapViewController save favoriteBrewery in mainContext
FavoriteBeersViewController Deleting function is in mainContext is really just unfavoriting
FavoriteBreweriesViewController Deleting function is in mainContextreally just unfavoriting


Background Context Updates
BreweryDBClient createBreweryObject
BreweryDBClient createBeerObject
BreweryDBClient downloadImageToCoreDataForBrewery
BreweryDBClient downloadBeerImagetoCoreData
BreweryDBClient saveBackround
BeerDetailViewController favorting and tasting note


What are the problems
Set up tutorial on remaining screes
Put back image downloading code.

Left off at brewerytablelist trying to optimize
ui

Double brewery being created, solved used a perform and wait.
I want to see how this is possible why isn't one being created before the next one goes'

1. When favoriting a brewery from the map, I'm told that the action failed
but its completion is 50/50 (This may have been solved with fix 5.)
2. When deleting all beers and breweries, I'm confronted with the same warning. (This may have been solved with fix 5.)
7. Lets get everything that downloads beers and styles to work on completion handlers.
--------------------------------------------------------------------------------

What are you working on now?
6. Not All Breweries are loaded into the brewery table after download is complete.
Observations:
When you start with no breweries and I click around to use the UI. The breweries
are not completely loaded.
What happens when I just let it load without mucking up the UI?
Again, it does not load all the breweries.
I can see Zeta Brewing and Zeroday Brewering are listed but are they save.
Thesis: It's too many attempts to save different context in recursive functions
Solution: Going to try and save everything in createBreweryObject and also take
all other references to saving, on the downloadAllBreweries path
Problems Introduce By Solution: 
--------------------------------------------------------------------------------

Who is firing the completion handler in BreweryDB to return back to the
CategoryViewController with All Pages Processed?
That would be the downloadBeersAndBreweriesByStyle group notify All Pages Processed

I'm testing if changing the code for createBrewery to perform on
managed object context without blocking'

What did you learn from the stanford course
When doing saves on the manged object context always complete them within the
context with code like this
managedObjectContext.perform {

}

Completed Problems
3.The SelectedBeers list does not show current labels.
Why
3. SelectedBeers list does not show current beers.
3a. SelectedBeers list is now showing current beers but not showing the correct images
Thesis: I'm thinking the beers are in the wrong context so the query cannot see them.
Solution: The beer object that I was attaching the image to was in the Persistent Context.
The beer object is being created in the MainContext
4.UI is unresponsive when creating breweries
Thesis: Create Brewery Objects in the mainContext puts them on the mainQueue.
Move these either to the backup queue
Perform these asynchronously instead of serial.

Done! First things first fix the perform as we are jumping to fatalerror.
Done! Complete removing a return object from createBrewery and use a completion handler
instead.
Done very responsive.
5. Breweries are not showing up on the map
5a. Breweries are not showing up on the map the first time around
Observations
If I tab away from the map and then tab back the locations show up.
When it first gets segued too. The MapView see 0 beers that match the style
What are you doing to test
Thesis: The beer object when it was being save was not being save with the
relationship brewer. This was causing it to randomly not request to fetches
Solution: Added code to the createBeerObject that would requires a brewery.
Then add that brewery as the brewer and brewerID.
This makes setBeerBrewerData information obsolete.
